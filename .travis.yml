language: node_js
node_js:
  - '6.14.8'

cache: npm

services:
  - docker

deploy:
  provider: elasticbeanstalk
  access_key_id:
    secure: "Encrypted <access-key-id>="
  secret_access_key:
    secure: "Encypted <secret-access-key>="
  region: "us-east-1"
  app: "example-app-name"
  env: "example-app-environment"
  bucket_name: "the-target-S3-bucket"

# Travis lifecycle : apt addons, cache, before_install, install, before_script, script, before_cache,
#   after_success/after_failure, before_deploy, deploy, after_deploy, after_script

install:
  - npm ci

script:
  - npm test
  - npm run build

deploy:
  provider: pages
  skip-cleanup: true
  github-token: $GITHUB_TOKEN
  on:
    branch: travis
